---
- name: install openssh tools
  package:
    name: openssh
    state: present

- name: set ssh dir when its undefined
  set_fact:
    ssh_dir: "/tmp/contrail/ssh"
  when:
   - ssh_dir is not defined

- name: create ssh directory
  file:
    path: "{{ ssh_dir }}"
    state: directory
    mode: 0700
    recurse: yes

- name: generate ssh keys
  shell: ssh-keygen -f {{ ssh_dir }}/id_rsa -t rsa -N ''
  args:
    creates: "{{ ssh_dir }}/id_rsa"
